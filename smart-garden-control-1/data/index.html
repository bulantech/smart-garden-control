<!DOCTYPE html>
<html>
<title>Smart garden</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- <link rel="stylesheet" href="/w3.css">
<link rel="stylesheet" href="/w3pro.css">
<link rel="stylesheet" href="/w3-theme-green.css"> -->
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3pro.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-green.css">

<body>

<header class="w3-container w3-card w3-theme">
  <h3>SMART GARDEN</h3>
</header>

<div class="w3-container">
	<br>

	<div class="w3-cell-row">
	  <div class="w3-cell" style="width:100%">
	    <div class="w3-center"><h5>MONITORING</h5></div>
	  </div>	  
	</div> 
	<hr>

	<div class="w3-cell-row">
	  <div class="w3-cell" style="width:50%">
	    <div class="w3-right-align"><h5>Sensor :</h5></div>
	  </div>
	  <div class="w3-cell w3-container">
	    <!-- <span class="w3-text-green w3-left-align" id="sensorValue">NONE</h3> -->
	    <h4><input class="w3-input w3-border w3-text-green" type="number" id="sensorValue"></h4>
	  </div>
	</div>  
	<br>
	
	<div class="w3-cell-row">
	  <div class="w3-cell" style="width:50%">
	    <div class="w3-right-align"><h5>Relay :</h5></div>
	  </div>
	  <div class="w3-cell w3-container">
	    <button class="w3-button w3-blue w3-xlarge" id="btOnOff">NONE</button>
	    <span class="w3-right-align" id="countDown">300</span>
	  </div>
	</div> 
	<br>
	<hr>

	<div class="w3-cell-row">
	  <div class="w3-cell" style="width:100%">
	    <div class="w3-center"><h5>SETTING</h5></div>
	  </div>	  
	</div> 
	<hr>

	<div class="w3-cell-row">
	  <div class="w3-cell" style="width:50%">
	    <div class="w3-right-align"><h5>Start Value :</h5></div>
	  </div>
	  <div class="w3-cell w3-container">
	    <input class="w3-input w3-border" type="number" id="startValue">
	  </div>
	</div>  
	<br>
	
	<div class="w3-cell-row">
	  <div class="w3-cell" style="width:50%">
	    <div class="w3-right-align"><h5>Stop Value :</h5></div>
	  </div>
	  <div class="w3-cell w3-container">
	    <input class="w3-input w3-border" type="number" id="stopValue">
	  </div>
	</div> 
	<br>

	<div class="w3-cell-row">
	  <div class="w3-cell" style="width:50%">
	    <div class="w3-right-align"><h5>Max time :</h5></div>
	  </div>
	  <div class="w3-cell w3-container">
	    <input class="w3-input w3-border" type="number" id="maxTime">
	  </div>
	</div> 
	<br>
	<br>

	<div class="w3-cell-row">
	  <div class="w3-cell" style="width:100%">
	    <div class="w3-center"><button class="w3-button w3-theme w3-xxlarge" id="btSave">SAVE</button></div>
	  </div>	  
	</div> 

	<br>

	
</div>
<br>

<footer class="w3-container w3-theme">
  <h5>by BULANTECH</h5>
</footer>

<!-- <script src="/jquery.min.js"></script> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
$(function() {
	console.log('Ready.')

	$('#countDown').hide()
	getStatus('first')
	

	$('#btSave').click(()=>{
		console.log('btSave click')
	}) 
	$('#btOnOff').click(()=>{
		console.log('btOnOff click ->', $('#btOnOff').text())
		if($('#btOnOff').text() == 'ON') {
			$('#btOnOff').text('OFF')
		} else {
			$('#btOnOff').text('ON')
		}
	}) 

})

function getStatus(first) {
	$.get( "http://localhost:3000/status", function( data ) {
		console.log(data)
  	let value = data.split(',')
  	$('#sensorValue').val(value[0])
  	if(value[0] == 0) {
  		$('#btOnOff').text('OFF')
  	} else {
  		$('#btOnOff').text('ON') 
  	}
  	if(first) {
  		$('#startValue').val(value[2])
  		$('#stopValue').val(value[3])
  		$('#maxTime').val(value[4])
  	}

	});
}

</script>


</body>
</html>